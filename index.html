<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Pomodoro Timer</title>
    <script src="https://cdn.tailwindcss.com"></script>
</head>
<body class="bg-gradient-to-br from-indigo-100 via-purple-100 to-pink-100 flex items-center justify-center min-h-screen">
    <div class="bg-white p-8 rounded-2xl shadow-xl w-full max-w-md transform transition-all duration-300">
        <h1 class="text-3xl font-bold text-center mb-6 text-gray-800">Pomodoro Timer</h1>
        <div class="mb-6">
            <label class="block text-sm font-semibold text-gray-700 mb-2">Work Duration</label>
            <div class="flex space-x-4">
                <div class="w-1/2">
                    <input type="number" id="workMinutes" value="25" min="0" placeholder="Minutes" class="block w-full p-3 border border-gray-300 rounded-lg focus:ring-2 focus:ring-indigo-400 focus:border-indigo-400 transition duration-200">
                    <p class="text-xs text-gray-500 mt-1 text-center">Minutes</p>
                </div>
                <div class="w-1/2">
                    <input type="number" id="workSeconds" value="0" min="0" max="59" placeholder="Seconds" class="block w-full p-3 border border-gray-300 rounded-lg focus:ring-2 focus:ring-indigo-400 focus:border-indigo-400 transition duration-200">
                    <p class="text-xs text-gray-500 mt-1 text-center">Seconds</p>
                </div>
            </div>
        </div>
        <div class="mb-6">
            <label class="block text-sm font-semibold text-gray-700 mb-2">Break Duration</label>
            <div class="flex space-x-4">
                <div class="w-1/2">
                    <input type="number" id="breakMinutes" value="5" min="0" placeholder="Minutes" class="block w-full p-3 border border-gray-300 rounded-lg focus:ring-2 focus:ring-indigo-400 focus:border-indigo-400 transition duration-200">
                    <p class="text-xs text-gray-500 mt-1 text-center">Minutes</p>
                </div>
                <div class="w-1/2">
                    <input type="number" id="breakSeconds" value="0" min="0" max="59" placeholder="Seconds" class="block w-full p-3 border border-gray-300 rounded-lg focus:ring-2 focus:ring-indigo-400 focus:border-indigo-400 transition duration-200">
                    <p class="text-xs text-gray-500 mt-1 text-center">Seconds</p>
                </div>
            </div>
        </div>
        <div class="text-center mb-6">
            <span id="timerDisplay" class="text-5xl font-mono text-gray-800">25:00</span>
            <p id="sessionType" class="text-xl text-gray-600 mt-2 font-medium">Work</p>
        </div>
        <div class="flex justify-center space-x-4">
            <button id="startButton" class="bg-indigo-500 text-white px-6 py-3 rounded-lg hover:bg-indigo-600 focus:ring-2 focus:ring-indigo-400 focus:ring-opacity-50 transition duration-200">Start</button>
            <button id="stopButton" class="bg-red-500 text-white px-6 py-3 rounded-lg hover:bg-red-600 focus:ring-2 focus:ring-red-400 focus:ring-opacity-50 transition duration-200" disabled>Stop</button>
        </div>
    </div>

    <script>
        let workDuration = 25 * 60; // Default 25 minutes in seconds
        let breakDuration = 5 * 60; // Default 5 minutes in seconds
        let timeLeft = workDuration;
        let isRunning = false;
        let isWorkSession = true;
        let timerInterval = null;
        let workAudio = new Audio('Focus.mp3');
        let breakAudio = new Audio('Break.mp3');

        const timerDisplay = document.getElementById('timerDisplay');
        const sessionType = document.getElementById('sessionType');
        const startButton = document.getElementById('startButton');
        const stopButton = document.getElementById('stopButton');
        const workMinutesInput = document.getElementById('workMinutes');
        const workSecondsInput = document.getElementById('workSeconds');
        const breakMinutesInput = document.getElementById('breakMinutes');
        const breakSecondsInput = document.getElementById('breakSeconds');

        // Update timer display and tab title
        function updateDisplay() {
            const minutes = Math.floor(timeLeft / 60);
            const seconds = timeLeft % 60;
            const displayTime = `${minutes}:${seconds.toString().padStart(2, '0')}`;
            timerDisplay.textContent = displayTime;
            document.title = `${displayTime} - ${isWorkSession ? 'Work' : 'Break'} | Pomodoro Timer`;
        }

        // Play appropriate sound based on session
        function playSound() {
            const audio = isWorkSession ? breakAudio : workAudio;
            audio.play().catch(error => console.error('Error playing sound:', error));
        }

        // Switch between work and break sessions
        function switchSession() {
            playSound();
            isWorkSession = !isWorkSession;
            timeLeft = isWorkSession ? workDuration : breakDuration;
            sessionType.textContent = isWorkSession ? 'Work' : 'Break';
            updateDisplay();
        }

        // Timer logic
        function startTimer() {
            if (!isRunning) {
                // Ensure duration is at least 1 second
                if (timeLeft <= 0) {
                    timeLeft = isWorkSession ? workDuration : breakDuration;
                    if (timeLeft <= 0) return; // Prevent starting with zero duration
                }
                isRunning = true;
                startButton.textContent = 'Pause';
                stopButton.disabled = false;

                timerInterval = setInterval(() => {
                    if (timeLeft > 0) {
                        timeLeft--;
                        updateDisplay();
                    } else {
                        switchSession();
                    }
                }, 1000);
            } else {
                clearInterval(timerInterval);
                isRunning = false;
                startButton.textContent = 'Resume';
            }
        }

        // Stop and reset timer
        function stopTimer() {
            clearInterval(timerInterval);
            isRunning = false;
            timeLeft = workDuration;
            isWorkSession = true;
            sessionType.textContent = 'Work';
            startButton.textContent = 'Start';
            stopButton.disabled = true;
            updateDisplay();
        }

        // Update work duration when inputs change
        function updateWorkDuration() {
            const minutes = parseInt(workMinutesInput.value) || 0;
            const seconds = parseInt(workSecondsInput.value) || 0;
            workDuration = (minutes * 60) + seconds;
            if (!isRunning && isWorkSession) {
                timeLeft = workDuration;
                updateDisplay();
            }
        }

        // Update break duration when inputs change
        function updateBreakDuration() {
            const minutes = parseInt(breakMinutesInput.value) || 0;
            const seconds = parseInt(breakSecondsInput.value) || 0;
            breakDuration = (minutes * 60) + seconds;
            if (!isRunning && !isWorkSession) {
                timeLeft = breakDuration;
                updateDisplay();
            }
        }

        // Input event listeners
        workMinutesInput.addEventListener('input', updateWorkDuration);
        workSecondsInput.addEventListener('input', updateWorkDuration);
        breakMinutesInput.addEventListener('input', updateBreakDuration);
        breakSecondsInput.addEventListener('input', updateBreakDuration);

        // Button event listeners
        startButton.addEventListener('click', startTimer);
        stopButton.addEventListener('click', stopTimer);

        // Initialize display
        updateDisplay();
    </script>
</body>
</html>
